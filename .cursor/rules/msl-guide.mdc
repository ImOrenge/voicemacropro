---
description:
globs:
alwaysApply: false
---
# MSL (Macro Scripting Language) ê°œë°œ ê°€ì´ë“œ

## ğŸ“– MSL ì†Œê°œ
MSLì€ VoiceMacro Proì˜ ì»¤ìŠ¤í…€ ìŠ¤í¬ë¦½íŒ… ì–¸ì–´ë¡œ, ê²Œì´ë¨¸ê°€ ì§ê´€ì ìœ¼ë¡œ ë³µì¡í•œ ë§¤í¬ë¡œë¥¼ ì‘ì„±í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.

## ğŸ”§ MSL ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### í•µì‹¬ ì»´í¬ë„ŒíŠ¸
- **ì–´íœ˜ ë¶„ì„ê¸°**: [backend/parsers/msl_lexer.py](mdc:backend/parsers/msl_lexer.py) - ìŠ¤í¬ë¦½íŠ¸ë¥¼ í† í°ìœ¼ë¡œ ë¶„í•´
- **êµ¬ë¬¸ ë¶„ì„ê¸°**: [backend/parsers/msl_parser.py](mdc:backend/parsers/msl_parser.py) - AST ìƒì„± ë° ë¬¸ë²• ê²€ì¦
- **AST ë…¸ë“œ**: [backend/parsers/msl_ast.py](mdc:backend/parsers/msl_ast.py) - ì¶”ìƒ êµ¬ë¬¸ íŠ¸ë¦¬ ë…¸ë“œ ì •ì˜
- **ì¸í„°í”„ë¦¬í„°**: [backend/parsers/msl_interpreter.py](mdc:backend/parsers/msl_interpreter.py) - ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì—”ì§„

## ğŸ“ MSL ë¬¸ë²• ê·œì¹™

### ê¸°ë³¸ ì—°ì‚°ì

| ì—°ì‚°ì | ì„¤ëª… | ì˜ˆì‹œ | ë™ì‘ |
|--------|------|------|------|
| `,` | ìˆœì°¨ ì‹¤í–‰ | `W,A,S,D` | W â†’ A â†’ S â†’ D ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ |
| `+` | ë™ì‹œ ì‹¤í–‰ | `W+A+S+D` | W, A, S, Dë¥¼ ë™ì‹œì— ëˆ„ë¦„ |
| `>` | í™€ë“œ ì—°ê²° | `W>A>S>D` | W ëˆ„ë¥´ê³  ìœ ì§€í•˜ë©´ì„œ A, S, D ìˆœì°¨ ì‹¤í–‰ |
| `\|` | ë³‘ë ¬ ì‹¤í–‰ | `W\|A\|S\|D` | ë…ë¦½ì ì¸ 4ê°œ ìŠ¤ë ˆë“œë¡œ ì‹¤í–‰ |
| `~` | í† ê¸€ | `~CapsLock` | CapsLock ON/OFF ì „í™˜ |
| `*` | ë°˜ë³µ | `W*5` | Wí‚¤ë¥¼ 5ë²ˆ ë°˜ë³µ |
| `&` | ì—°ì† ì…ë ¥ | `Space&100` | Spaceë¥¼ 100ms ê°„ê²©ìœ¼ë¡œ ì—°ì† ì…ë ¥ |

### íƒ€ì´ë° ì œì–´

| í‘œí˜„ | ì„¤ëª… | ì˜ˆì‹œ | ë™ì‘ |
|------|------|------|------|
| `(ìˆ«ì)` | ì§€ì—° ì‹œê°„ (ms) | `W(500)A` | W ëˆ„ë¥´ê³  500ms ëŒ€ê¸° í›„ A |
| `[ìˆ«ì]` | í™€ë“œ ì‹œê°„ (ms) | `W[1000]` | Wí‚¤ë¥¼ 1ì´ˆê°„ í™€ë“œ |
| `{ìˆ«ì}` | ë°˜ë³µ ê°„ê²© (ms) | `W*5{200}` | Wí‚¤ë¥¼ 200ms ê°„ê²©ìœ¼ë¡œ 5ë²ˆ |
| `<ìˆ«ì>` | í˜ì´ë“œ ì‹œê°„ (ms) | `W<100>A` | Wì—ì„œ Aë¡œ 100msì— ê±¸ì³ ì „í™˜ |

### ê³ ê¸‰ ê¸°ëŠ¥

| ê¸°ëŠ¥ | ë¬¸ë²• | ì˜ˆì‹œ | ì„¤ëª… |
|------|------|------|------|
| **ê·¸ë£¹í™”** | `(...)` | `(W+A),S,D` | W+Aë¥¼ ê·¸ë£¹ìœ¼ë¡œ ë¬¶ì–´ ìˆœì°¨ ì‹¤í–‰ |
| **ì¡°ê±´ë¶€ ì‹¤í–‰** | `?ì¡°ê±´:` | `?HP<50:Heal` | HPê°€ 50% ë¯¸ë§Œì¼ ë•Œë§Œ í ì‹¤í–‰ |
| **ë³€ìˆ˜ ì‚¬ìš©** | `$ë³€ìˆ˜ëª…` | `$combo1,W,A` | ë¯¸ë¦¬ ì •ì˜ëœ ì½¤ë³´ ì‚¬ìš© |
| **ë§ˆìš°ìŠ¤ ì œì–´** | `@ì¢Œí‘œ` | `@(100,200)` | ë§ˆìš°ìŠ¤ë¥¼ (100,200) ì¢Œí‘œë¡œ ì´ë™ |
| **íœ  ì œì–´** | `wheel+/-` | `wheel+3` | ë§ˆìš°ìŠ¤ íœ  3ë²ˆ ìœ„ë¡œ ìŠ¤í¬ë¡¤ |

## ğŸ§ª MSL ê°œë°œ ë° í…ŒìŠ¤íŠ¸

### íŒŒì„œ í…ŒìŠ¤íŠ¸
```python
# MSL ìŠ¤í¬ë¦½íŠ¸ íŒŒì‹± í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ
from backend.parsers.msl_parser import MSLParser

parser = MSLParser()
script = "W,A,S,D"
ast = parser.parse(script)
```

### ì‹¤í–‰ í…ŒìŠ¤íŠ¸
```python
# MSL ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ í…ŒìŠ¤íŠ¸
from backend.parsers.msl_interpreter import MSLInterpreter

interpreter = MSLInterpreter()
interpreter.execute(ast)
```

### í…ŒìŠ¤íŠ¸ íŒŒì¼ë“¤
- [backend/tests/test_msl_complete.py](mdc:backend/tests/test_msl_complete.py) - ì „ì²´ MSL ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [backend/tests/test_msl_specific.py](mdc:backend/tests/test_msl_specific.py) - íŠ¹ì • ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [backend/tests/test_working_msl.py](mdc:backend/tests/test_working_msl.py) - ë™ì‘ í™•ì¸ í…ŒìŠ¤íŠ¸

## ğŸ¯ MSL ì‚¬ìš© ì˜ˆì‹œ

### ê¸°ë³¸ ì˜ˆì‹œ
```msl
# ìˆœì°¨ì ìœ¼ë¡œ í‚¤ ëˆ„ë¥´ê¸°
W,A,S,D

# ë™ì‹œì— í‚¤ ëˆ„ë¥´ê¸°  
W+A+S+D

# ì§€ì—° ì‹œê°„ì„ í¬í•¨í•œ ì½¤ë³´
Q(100)W(150)E(200)R

# í‚¤ë¥¼ í™€ë“œí•˜ë©´ì„œ ë‹¤ë¥¸ í‚¤ ì‹¤í–‰
Shift[2000]+(W,A,S,D)

# ë°˜ë³µ ì‹¤í–‰
Space*10{50}
```

### ê³ ê¸‰ ì˜ˆì‹œ
```msl
# ë³µí•© ì½¤ë³´ (ê²©íˆ¬ ê²Œì„)
Down+Forward,Punch(50)Kick(100)*3

# MMO ìŠ¤í‚¬ ë¡œí…Œì´ì…˜
Skill1(1000)Skill2(800)Skill3(1200)Buff

# ì¡°ê±´ë¶€ ì‹¤í–‰
?MP>80:FireBall,?MP<20:ManaPotion

# í† ê¸€ ê¸°ëŠ¥
~CapsLock,(W,A,S,D),~CapsLock
```

## âš ï¸ MSL ê°œë°œ ì£¼ì˜ì‚¬í•­

### í˜„ì¬ ì§€ì› í˜„í™©
- âœ… ê¸°ë³¸ ì—°ì‚°ì: `,`, `+`, `*`, `()`, `[]` 
- âœ… ë‹¨ìˆœ í‚¤ ì…ë ¥ ë° ì‹œí€€ìŠ¤
- âš ï¸ ë¶€ë¶„ ì§€ì›: `>`, `|`, `~`, `&`
- âŒ ë¯¸êµ¬í˜„: ì¡°ê±´ë¶€ ì‹¤í–‰(`?`), ë³€ìˆ˜(`$`), ë§ˆìš°ìŠ¤ ì œì–´(`@`)

### ê°œë°œ ìš°ì„ ìˆœìœ„
1. í† ê¸€(`~`) ì—°ì‚°ì ì™„ì„±
2. ë³‘ë ¬ ì‹¤í–‰(`|`) ìµœì í™”
3. ì¡°ê±´ë¶€ ì‹¤í–‰(`?`) êµ¬í˜„
4. ë³€ìˆ˜ ì‹œìŠ¤í…œ(`$`) êµ¬í˜„
5. ë§ˆìš°ìŠ¤ ì œì–´(`@`) ì¶”ê°€

## ğŸ” ë””ë²„ê¹… ê°€ì´ë“œ

### íŒŒì‹± ì˜¤ë¥˜ í•´ê²°
- í† í°í™” ë¬¸ì œ: [backend/parsers/msl_lexer.py](mdc:backend/parsers/msl_lexer.py) í™•ì¸
- êµ¬ë¬¸ ì˜¤ë¥˜: [backend/parsers/msl_parser.py](mdc:backend/parsers/msl_parser.py) í™•ì¸
- AST êµ¬ì¡°: [backend/parsers/msl_ast.py](mdc:backend/parsers/msl_ast.py) í™•ì¸

### ì‹¤í–‰ ì˜¤ë¥˜ í•´ê²°  
- ì‹¤í–‰ ë¡œì§: [backend/parsers/msl_interpreter.py](mdc:backend/parsers/msl_interpreter.py) í™•ì¸
- í‚¤ ì…ë ¥ ì˜¤ë¥˜: PyAutoGUI ì„¤ì • í™•ì¸
- íƒ€ì´ë° ë¬¸ì œ: ë”œë ˆì´ ë° í™€ë“œ ì‹œê°„ ì¡°ì •

## ğŸ“š ê´€ë ¨ ë¬¸ì„œ
- MSL ì „ì²´ ëª…ì„¸: [PRD_ê²Œì„AIìŒì„±ë§¤í¬ë¡œ.md](mdc:PRD_ê²Œì„AIìŒì„±ë§¤í¬ë¡œ.md) ì„¹ì…˜ 3.6
- UI ì—°ë™: [VoiceMacroPro/Views/CustomScriptingView.xaml](mdc:VoiceMacroPro/Views/CustomScriptingView.xaml)
